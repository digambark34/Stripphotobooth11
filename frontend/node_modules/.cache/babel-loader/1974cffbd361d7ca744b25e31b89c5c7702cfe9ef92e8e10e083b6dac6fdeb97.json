{"ast":null,"code":"var _jsxFileName = \"D:\\\\Strip\\\\frontend\\\\src\\\\components\\\\CapturePage.js\",\n  _s = $RefreshSig$();\nimport { useRef, useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport '../responsive.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CapturePage() {\n  _s();\n  var _settings$background2, _settings$background4;\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [steps, setSteps] = useState(0);\n  const [countdown, setCountdown] = useState(null);\n  const [settings, setSettings] = useState({\n    eventName: '',\n    background: {\n      type: 'color',\n      value: '#ff0000'\n    },\n    logo: null\n  });\n  const [notification, setNotification] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [capturedPhotos, setCapturedPhotos] = useState([]); // Store captured photo data\n\n  // Fallback API URL if environment variable is not set\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\n\n  // Initialize canvas with background - 600√ó1800 pixels at 300 DPI (2√ó6 inch)\n  const initializeCanvas = useCallback(() => {\n    if (canvasRef.current) {\n      var _settings$background;\n      const ctx = canvasRef.current.getContext(\"2d\");\n      const width = 600; // 2 inches √ó 300 DPI\n      const height = 1800; // 6 inches √ó 300 DPI\n\n      canvasRef.current.width = width;\n      canvasRef.current.height = height;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, width, height);\n\n      // Apply background color\n      const bgColor = ((_settings$background = settings.background) === null || _settings$background === void 0 ? void 0 : _settings$background.value) || '#ff0000';\n      ctx.fillStyle = bgColor;\n      ctx.fillRect(0, 0, width, height);\n    }\n  }, [(_settings$background2 = settings.background) === null || _settings$background2 === void 0 ? void 0 : _settings$background2.value]);\n\n  // Load settings from localStorage\n  useEffect(() => {\n    try {\n      const savedSettings = localStorage.getItem('photoBoothSettings');\n      if (savedSettings) {\n        const parsedSettings = JSON.parse(savedSettings);\n        setSettings(parsedSettings);\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error);\n      // Reset to default settings if parsing fails\n      setSettings({\n        eventName: '',\n        background: {\n          type: 'color',\n          value: '#ff0000'\n        },\n        logo: null\n      });\n    }\n  }, []);\n\n  // Initialize canvas when settings change\n  useEffect(() => {\n    var _settings$background3;\n    if (canvasRef.current && (_settings$background3 = settings.background) !== null && _settings$background3 !== void 0 && _settings$background3.value) {\n      initializeCanvas();\n    }\n  }, [(_settings$background4 = settings.background) === null || _settings$background4 === void 0 ? void 0 : _settings$background4.value, initializeCanvas]);\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      video: {\n        width: {\n          ideal: 1920,\n          min: 1280\n        },\n        height: {\n          ideal: 1080,\n          min: 720\n        },\n        facingMode: 'user',\n        frameRate: {\n          ideal: 30\n        },\n        aspectRatio: {\n          ideal: 16 / 9\n        }\n      }\n    }).then(stream => {\n      if (videoRef.current) videoRef.current.srcObject = stream;\n    }).catch(error => {\n      console.warn(\"Camera access denied:\", error);\n      setNotification({\n        type: \"error\",\n        message: \"Camera access required. Please allow webcam access and refresh the page.\"\n      });\n    });\n\n    // Cleanup function to stop camera when component unmounts\n    return () => {\n      if (videoRef.current && videoRef.current.srcObject) {\n        const tracks = videoRef.current.srcObject.getTracks();\n        tracks.forEach(track => track.stop());\n      }\n    };\n  }, []);\n  const startCapture = () => {\n    if (steps >= 3) return;\n\n    // Start countdown from 3\n    setCountdown(3);\n\n    // Countdown sequence: 3 -> 2 -> 1 -> CAPTURE\n    setTimeout(() => setCountdown(2), 1000);\n    setTimeout(() => setCountdown(1), 2000);\n    setTimeout(() => {\n      setCountdown(\"üì∏\"); // Show camera icon briefly\n      setTimeout(() => {\n        takePhoto();\n        setCountdown(null);\n      }, 500); // Show camera icon for 0.5 seconds before capture\n    }, 3000);\n  };\n  const takePhoto = () => {\n    var _settings$background5;\n    const ctx = canvasRef.current.getContext(\"2d\");\n    const width = 600; // 2 inches √ó 300 DPI\n    const photoHeight = 600; // Each photo is 2√ó2 inches (600√ó600 pixels)\n    const fullHeight = 1800; // Total strip height: 6 inches √ó 300 DPI\n\n    // First, ensure canvas has background\n    const bgColor = ((_settings$background5 = settings.background) === null || _settings$background5 === void 0 ? void 0 : _settings$background5.value) || '#ff0000';\n\n    // Clear entire canvas and apply background\n    ctx.clearRect(0, 0, width, fullHeight);\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, 0, width, fullHeight);\n\n    // Redraw all previously captured photos\n    capturedPhotos.forEach((photoData, index) => {\n      const img = new Image();\n      img.onload = () => {\n        ctx.drawImage(img, 0, index * photoHeight, width, photoHeight);\n      };\n      img.src = photoData;\n    });\n\n    // Capture current photo from video - FULL FRAME to capture ALL people\n    const tempCanvas = document.createElement('canvas');\n    tempCanvas.width = width;\n    tempCanvas.height = photoHeight;\n    const tempCtx = tempCanvas.getContext('2d');\n\n    // Get video dimensions\n    const videoWidth = videoRef.current.videoWidth || videoRef.current.clientWidth;\n    const videoHeight = videoRef.current.videoHeight || videoRef.current.clientHeight;\n\n    // Debug: Log dimensions to verify full frame capture at 300 DPI\n    console.log('üì∏ Capturing photo at 300 DPI (600√ó1800):', {\n      videoWidth,\n      videoHeight,\n      canvasWidth: width,\n      canvasPhotoHeight: photoHeight,\n      totalStripHeight: fullHeight,\n      step: steps + 1,\n      physicalSize: '2√ó6 inches'\n    });\n\n    // Fill background first\n    tempCtx.fillStyle = bgColor;\n    tempCtx.fillRect(0, 0, width, photoHeight);\n\n    // Strategy: Use \"object-fit: cover\" approach to capture ALL people\n    // This maintains aspect ratio while ensuring the entire frame is captured\n\n    if (videoWidth && videoHeight) {\n      // Calculate scale to cover the entire photo area (like CSS object-fit: cover)\n      const scaleX = width / videoWidth;\n      const scaleY = photoHeight / videoHeight;\n      const scale = Math.max(scaleX, scaleY); // Use LARGER scale to cover entire area\n\n      // Calculate dimensions and centering\n      const scaledWidth = videoWidth * scale;\n      const scaledHeight = videoHeight * scale;\n      const offsetX = (width - scaledWidth) / 2;\n      const offsetY = (photoHeight - scaledHeight) / 2;\n\n      // Draw the video frame to cover the entire photo area\n      tempCtx.drawImage(videoRef.current, 0, 0, videoWidth, videoHeight,\n      // Source: ENTIRE video frame\n      offsetX, offsetY, scaledWidth, scaledHeight // Destination: Cover entire area\n      );\n    } else {\n      // Fallback: Direct capture if dimensions not available\n      tempCtx.drawImage(videoRef.current, 0, 0, width, photoHeight);\n    }\n\n    // Store the captured photo data\n    const photoData = tempCanvas.toDataURL();\n    setCapturedPhotos(prev => [...prev, photoData]);\n\n    // Draw current photo on main canvas - FULL FRAME capture\n    ctx.fillStyle = bgColor;\n    ctx.fillRect(0, steps * photoHeight, width, photoHeight);\n    if (videoWidth && videoHeight) {\n      // Use same \"object-fit: cover\" approach for main canvas\n      const scaleX = width / videoWidth;\n      const scaleY = photoHeight / videoHeight;\n      const scale = Math.max(scaleX, scaleY); // Cover entire area\n\n      const scaledWidth = videoWidth * scale;\n      const scaledHeight = videoHeight * scale;\n      const offsetX = (width - scaledWidth) / 2;\n      const offsetY = (photoHeight - scaledHeight) / 2;\n      ctx.drawImage(videoRef.current, 0, 0, videoWidth, videoHeight,\n      // Source: ENTIRE video frame\n      offsetX, steps * photoHeight + offsetY, scaledWidth, scaledHeight // Destination: Cover photo section\n      );\n    } else {\n      // Fallback\n      ctx.drawImage(videoRef.current, 0, steps * photoHeight, width, photoHeight);\n    }\n\n    // Optional logo overlay - scaled for 600√ó1800 format\n    if (settings.logo) {\n      const img = new Image();\n      img.src = settings.logo; // settings.logo is already a base64 string\n      img.onload = () => {\n        // Scale logo for higher resolution: 125√ó62.5 pixels\n        ctx.drawImage(img, 15, 15, 125, 62);\n      };\n    }\n\n    // Optional event name text on last step - positioned for 1800px height\n    if (steps === 2 && settings.eventName) {\n      ctx.fillStyle = \"#ffffff\";\n      ctx.font = \"30px sans-serif\"; // Larger font for higher resolution\n      ctx.fillText(settings.eventName, 15, 1770); // Near bottom of 1800px strip\n    }\n    setSteps(steps + 1);\n  };\n  const submit = async () => {\n    if (isSubmitting) return;\n    try {\n      setIsSubmitting(true);\n      setNotification(null);\n      const dataUrl = canvasRef.current.toDataURL(\"image/jpeg\", 0.8);\n      await axios.post(`${API_BASE_URL}/api/strips`, {\n        image: dataUrl,\n        eventName: settings.eventName,\n        background: settings.background,\n        logo: settings.logo\n      });\n      setNotification({\n        type: \"success\",\n        message: \"‚úÖ Thank you! Your photo strip has been sent for print.\"\n      });\n      setSteps(0);\n      setCapturedPhotos([]); // Clear captured photos\n      initializeCanvas(); // Clear and reinitialize with background\n    } catch (error) {\n      console.warn(\"Upload failed:\", error);\n      setNotification({\n        type: \"error\",\n        message: \"‚ùå Failed to upload. Please check your connection and try again.\"\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Auto-hide notification after 5 seconds\n  useEffect(() => {\n    if (notification) {\n      const timer = setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [notification]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this), notification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed top-6 right-6 z-50 p-4 rounded-2xl shadow-2xl backdrop-blur-lg border ${notification.type === 'success' ? 'bg-green-500/90 border-green-400/50' : 'bg-red-500/90 border-red-400/50'} text-white font-medium animate-slide-in`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: notification.type === 'success' ? '‚úÖ' : '‚ùå'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: notification.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setNotification(null),\n          className: \"ml-2 text-white/80 hover:text-white transition-colors\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 md:py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-8 sm:mb-12 md:mb-16\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block p-6 bg-white/10 backdrop-blur-lg rounded-3xl border border-white/20 shadow-2xl mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-white mb-3 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent\",\n            children: \"\\uD83D\\uDCF8 Strip Photobooth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-24 h-1 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-base sm:text-lg md:text-xl text-white/90 font-medium\",\n            children: \"Create amazing photo strips instantly!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-md sm:max-w-lg md:max-w-xl mx-auto px-4 sm:px-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/5 backdrop-blur-xl rounded-3xl p-6 sm:p-8 border border-white/10 shadow-2xl relative overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mb-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline-flex items-center space-x-3 bg-white/10 backdrop-blur-lg rounded-2xl px-6 py-3 border border-white/20\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-2xl\",\n                children: \"\\uD83D\\uDCF9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl sm:text-2xl font-bold text-white\",\n                children: \"Camera\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative group\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              autoPlay: true,\n              playsInline: true,\n              className: \"w-full aspect-video rounded-2xl shadow-2xl border-4 border-white/20 group-hover:border-white/30 transition-all duration-300\",\n              style: {\n                objectFit: 'cover'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent rounded-2xl pointer-events-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), countdown && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm rounded-2xl\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-4xl sm:text-6xl md:text-7xl font-black text-white drop-shadow-2xl mb-2 ${countdown === \"üì∏\" ? \"animate-pulse text-6xl sm:text-8xl md:text-9xl\" : \"animate-bounce\"}`,\n                  children: countdown\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white/80 text-sm sm:text-base font-medium\",\n                  children: countdown === \"üì∏\" ? \"Capturing...\" : countdown === 1 ? \"Say Cheese!\" : \"Get ready!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-4 left-4 right-4 bg-black/60 backdrop-blur-sm rounded-xl p-3 text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-white text-sm font-medium\",\n                children: [\"\\uD83D\\uDC65 \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-green-300\",\n                  children: \"ALL people in frame will be captured!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 22\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-white/70 text-xs mt-1\",\n                children: \"High-res 600\\xD71800px (300 DPI) \\u2022 Perfect for 2\\xD76 inch printing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 flex justify-center space-x-3\",\n            children: [1, 2, 3].map(step => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 transition-all duration-500 ${steps >= step ? 'bg-gradient-to-r from-green-400 to-emerald-400 border-green-300 shadow-lg shadow-green-400/50' : 'bg-white/10 border-white/30'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `text-xs font-medium transition-colors duration-300 ${steps >= step ? 'text-green-300' : 'text-white/50'}`,\n                children: step\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 21\n              }, this)]\n            }, step, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-8\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: startCapture,\n              disabled: steps >= 3,\n              className: `w-full py-4 sm:py-5 px-6 rounded-2xl font-bold text-lg sm:text-xl transition-all duration-300 transform relative overflow-hidden ${steps >= 3 ? 'bg-gradient-to-r from-gray-500 to-gray-600 cursor-not-allowed text-gray-200' : 'bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 hover:from-pink-600 hover:via-purple-600 hover:to-indigo-600 text-white shadow-2xl hover:shadow-pink-500/25 hover:scale-105 active:scale-95'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative z-10 flex items-center justify-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-2xl\",\n                  children: steps >= 3 ? '‚úÖ' : 'üì∏'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: steps >= 3 ? 'All Photos Captured!' : 'Capture Photo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 17\n              }, this), steps < 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-8 pt-6 border-t border-gradient-to-r from-transparent via-white/20 to-transparent\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inline-block bg-white/10 backdrop-blur-lg rounded-2xl px-6 py-3 border border-white/20\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-white/90 text-sm sm:text-base font-medium\",\n                  children: steps >= 3 ? 'üéâ Ready to create your strip!' : `üì∑ ${3 - steps} more photo${3 - steps > 1 ? 's' : ''} needed`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 19\n                }, this), settings.eventName && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-purple-300 text-xs sm:text-sm mt-2 font-medium\",\n                  children: [\"\\uD83C\\uDF8A \", settings.eventName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: submit,\n              disabled: steps < 3 || isSubmitting,\n              className: `w-full py-4 sm:py-5 px-6 rounded-2xl font-bold text-lg sm:text-xl transition-all duration-300 transform relative overflow-hidden ${steps >= 3 && !isSubmitting ? 'bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 hover:from-emerald-600 hover:via-green-600 hover:to-teal-600 text-white shadow-2xl hover:shadow-emerald-500/25 hover:scale-105 active:scale-95' : 'bg-gradient-to-r from-gray-600 to-gray-700 text-gray-400 cursor-not-allowed'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative z-10 flex items-center justify-center space-x-3\",\n                children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Creating Strip...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-2xl\",\n                    children: \"\\uD83D\\uDE80\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Submit Strip\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this), steps >= 3 && !isSubmitting && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          width: \"600\",\n          height: \"1800\",\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 5\n  }, this);\n}\n_s(CapturePage, \"y2tySWqpc/+nZKsFYsuSvSowQro=\");\n_c = CapturePage;\nvar _c;\n$RefreshReg$(_c, \"CapturePage\");","map":{"version":3,"names":["useRef","useState","useEffect","useCallback","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","CapturePage","_s","_settings$background2","_settings$background4","videoRef","canvasRef","steps","setSteps","countdown","setCountdown","settings","setSettings","eventName","background","type","value","logo","notification","setNotification","isSubmitting","setIsSubmitting","capturedPhotos","setCapturedPhotos","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","initializeCanvas","current","_settings$background","ctx","getContext","width","height","clearRect","bgColor","fillStyle","fillRect","savedSettings","localStorage","getItem","parsedSettings","JSON","parse","error","console","_settings$background3","navigator","mediaDevices","getUserMedia","video","ideal","min","facingMode","frameRate","aspectRatio","then","stream","srcObject","catch","warn","message","tracks","getTracks","forEach","track","stop","startCapture","setTimeout","takePhoto","_settings$background5","photoHeight","fullHeight","photoData","index","img","Image","onload","drawImage","src","tempCanvas","document","createElement","tempCtx","videoWidth","clientWidth","videoHeight","clientHeight","log","canvasWidth","canvasPhotoHeight","totalStripHeight","step","physicalSize","scaleX","scaleY","scale","Math","max","scaledWidth","scaledHeight","offsetX","offsetY","toDataURL","prev","font","fillText","submit","dataUrl","post","image","timer","clearTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","autoPlay","playsInline","style","objectFit","map","disabled","_c","$RefreshReg$"],"sources":["D:/Strip/frontend/src/components/CapturePage.js"],"sourcesContent":["import { useRef, useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport '../responsive.css';\r\n\r\nexport default function CapturePage() {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [steps, setSteps] = useState(0);\r\n  const [countdown, setCountdown] = useState(null);\r\n  const [settings, setSettings] = useState({\r\n    eventName: '',\r\n    background: { type: 'color', value: '#ff0000' },\r\n    logo: null\r\n  });\r\n  const [notification, setNotification] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [capturedPhotos, setCapturedPhotos] = useState([]); // Store captured photo data\r\n\r\n  // Fallback API URL if environment variable is not set\r\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\r\n\r\n\r\n\r\n  // Initialize canvas with background - 600√ó1800 pixels at 300 DPI (2√ó6 inch)\r\n  const initializeCanvas = useCallback(() => {\r\n    if (canvasRef.current) {\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      const width = 600;  // 2 inches √ó 300 DPI\r\n      const height = 1800; // 6 inches √ó 300 DPI\r\n\r\n      canvasRef.current.width = width;\r\n      canvasRef.current.height = height;\r\n\r\n      // Clear canvas\r\n      ctx.clearRect(0, 0, width, height);\r\n\r\n      // Apply background color\r\n      const bgColor = settings.background?.value || '#ff0000';\r\n      ctx.fillStyle = bgColor;\r\n      ctx.fillRect(0, 0, width, height);\r\n    }\r\n  }, [settings.background?.value]);\r\n\r\n  // Load settings from localStorage\r\n  useEffect(() => {\r\n    try {\r\n      const savedSettings = localStorage.getItem('photoBoothSettings');\r\n      if (savedSettings) {\r\n        const parsedSettings = JSON.parse(savedSettings);\r\n        setSettings(parsedSettings);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading settings:', error);\r\n      // Reset to default settings if parsing fails\r\n      setSettings({\r\n        eventName: '',\r\n        background: { type: 'color', value: '#ff0000' },\r\n        logo: null\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Initialize canvas when settings change\r\n  useEffect(() => {\r\n    if (canvasRef.current && settings.background?.value) {\r\n      initializeCanvas();\r\n    }\r\n  }, [settings.background?.value, initializeCanvas]);\r\n\r\n  useEffect(() => {\r\n    navigator.mediaDevices\r\n      .getUserMedia({\r\n        video: {\r\n          width: { ideal: 1920, min: 1280 },\r\n          height: { ideal: 1080, min: 720 },\r\n          facingMode: 'user',\r\n          frameRate: { ideal: 30 },\r\n          aspectRatio: { ideal: 16/9 }\r\n        }\r\n      })\r\n      .then((stream) => {\r\n        if (videoRef.current) videoRef.current.srcObject = stream;\r\n      })\r\n      .catch((error) => {\r\n        console.warn(\"Camera access denied:\", error);\r\n        setNotification({\r\n          type: \"error\",\r\n          message: \"Camera access required. Please allow webcam access and refresh the page.\"\r\n        });\r\n      });\r\n\r\n    // Cleanup function to stop camera when component unmounts\r\n    return () => {\r\n      if (videoRef.current && videoRef.current.srcObject) {\r\n        const tracks = videoRef.current.srcObject.getTracks();\r\n        tracks.forEach(track => track.stop());\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const startCapture = () => {\r\n    if (steps >= 3) return;\r\n\r\n    // Start countdown from 3\r\n    setCountdown(3);\r\n\r\n    // Countdown sequence: 3 -> 2 -> 1 -> CAPTURE\r\n    setTimeout(() => setCountdown(2), 1000);\r\n    setTimeout(() => setCountdown(1), 2000);\r\n    setTimeout(() => {\r\n      setCountdown(\"üì∏\"); // Show camera icon briefly\r\n      setTimeout(() => {\r\n        takePhoto();\r\n        setCountdown(null);\r\n      }, 500); // Show camera icon for 0.5 seconds before capture\r\n    }, 3000);\r\n  };\r\n\r\n  const takePhoto = () => {\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    const width = 600;        // 2 inches √ó 300 DPI\r\n    const photoHeight = 600;  // Each photo is 2√ó2 inches (600√ó600 pixels)\r\n    const fullHeight = 1800;  // Total strip height: 6 inches √ó 300 DPI\r\n\r\n    // First, ensure canvas has background\r\n    const bgColor = settings.background?.value || '#ff0000';\r\n\r\n    // Clear entire canvas and apply background\r\n    ctx.clearRect(0, 0, width, fullHeight);\r\n    ctx.fillStyle = bgColor;\r\n    ctx.fillRect(0, 0, width, fullHeight);\r\n\r\n    // Redraw all previously captured photos\r\n    capturedPhotos.forEach((photoData, index) => {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        ctx.drawImage(img, 0, index * photoHeight, width, photoHeight);\r\n      };\r\n      img.src = photoData;\r\n    });\r\n\r\n    // Capture current photo from video - FULL FRAME to capture ALL people\r\n    const tempCanvas = document.createElement('canvas');\r\n    tempCanvas.width = width;\r\n    tempCanvas.height = photoHeight;\r\n    const tempCtx = tempCanvas.getContext('2d');\r\n\r\n    // Get video dimensions\r\n    const videoWidth = videoRef.current.videoWidth || videoRef.current.clientWidth;\r\n    const videoHeight = videoRef.current.videoHeight || videoRef.current.clientHeight;\r\n\r\n    // Debug: Log dimensions to verify full frame capture at 300 DPI\r\n    console.log('üì∏ Capturing photo at 300 DPI (600√ó1800):', {\r\n      videoWidth,\r\n      videoHeight,\r\n      canvasWidth: width,\r\n      canvasPhotoHeight: photoHeight,\r\n      totalStripHeight: fullHeight,\r\n      step: steps + 1,\r\n      physicalSize: '2√ó6 inches'\r\n    });\r\n\r\n    // Fill background first\r\n    tempCtx.fillStyle = bgColor;\r\n    tempCtx.fillRect(0, 0, width, photoHeight);\r\n\r\n    // Strategy: Use \"object-fit: cover\" approach to capture ALL people\r\n    // This maintains aspect ratio while ensuring the entire frame is captured\r\n\r\n    if (videoWidth && videoHeight) {\r\n      // Calculate scale to cover the entire photo area (like CSS object-fit: cover)\r\n      const scaleX = width / videoWidth;\r\n      const scaleY = photoHeight / videoHeight;\r\n      const scale = Math.max(scaleX, scaleY); // Use LARGER scale to cover entire area\r\n\r\n      // Calculate dimensions and centering\r\n      const scaledWidth = videoWidth * scale;\r\n      const scaledHeight = videoHeight * scale;\r\n      const offsetX = (width - scaledWidth) / 2;\r\n      const offsetY = (photoHeight - scaledHeight) / 2;\r\n\r\n      // Draw the video frame to cover the entire photo area\r\n      tempCtx.drawImage(\r\n        videoRef.current,\r\n        0, 0, videoWidth, videoHeight, // Source: ENTIRE video frame\r\n        offsetX, offsetY, scaledWidth, scaledHeight // Destination: Cover entire area\r\n      );\r\n    } else {\r\n      // Fallback: Direct capture if dimensions not available\r\n      tempCtx.drawImage(\r\n        videoRef.current,\r\n        0, 0, width, photoHeight\r\n      );\r\n    }\r\n\r\n    // Store the captured photo data\r\n    const photoData = tempCanvas.toDataURL();\r\n    setCapturedPhotos(prev => [...prev, photoData]);\r\n\r\n    // Draw current photo on main canvas - FULL FRAME capture\r\n    ctx.fillStyle = bgColor;\r\n    ctx.fillRect(0, steps * photoHeight, width, photoHeight);\r\n\r\n    if (videoWidth && videoHeight) {\r\n      // Use same \"object-fit: cover\" approach for main canvas\r\n      const scaleX = width / videoWidth;\r\n      const scaleY = photoHeight / videoHeight;\r\n      const scale = Math.max(scaleX, scaleY); // Cover entire area\r\n\r\n      const scaledWidth = videoWidth * scale;\r\n      const scaledHeight = videoHeight * scale;\r\n      const offsetX = (width - scaledWidth) / 2;\r\n      const offsetY = (photoHeight - scaledHeight) / 2;\r\n\r\n      ctx.drawImage(\r\n        videoRef.current,\r\n        0, 0, videoWidth, videoHeight, // Source: ENTIRE video frame\r\n        offsetX, steps * photoHeight + offsetY, scaledWidth, scaledHeight // Destination: Cover photo section\r\n      );\r\n    } else {\r\n      // Fallback\r\n      ctx.drawImage(\r\n        videoRef.current,\r\n        0, steps * photoHeight, width, photoHeight\r\n      );\r\n    }\r\n\r\n    // Optional logo overlay - scaled for 600√ó1800 format\r\n    if (settings.logo) {\r\n      const img = new Image();\r\n      img.src = settings.logo; // settings.logo is already a base64 string\r\n      img.onload = () => {\r\n        // Scale logo for higher resolution: 125√ó62.5 pixels\r\n        ctx.drawImage(img, 15, 15, 125, 62);\r\n      };\r\n    }\r\n\r\n    // Optional event name text on last step - positioned for 1800px height\r\n    if (steps === 2 && settings.eventName) {\r\n      ctx.fillStyle = \"#ffffff\";\r\n      ctx.font = \"30px sans-serif\"; // Larger font for higher resolution\r\n      ctx.fillText(settings.eventName, 15, 1770); // Near bottom of 1800px strip\r\n    }\r\n\r\n    setSteps(steps + 1);\r\n  };\r\n\r\n  const submit = async () => {\r\n    if (isSubmitting) return;\r\n\r\n    try {\r\n      setIsSubmitting(true);\r\n      setNotification(null);\r\n\r\n      const dataUrl = canvasRef.current.toDataURL(\"image/jpeg\", 0.8);\r\n\r\n      await axios.post(`${API_BASE_URL}/api/strips`, {\r\n        image: dataUrl,\r\n        eventName: settings.eventName,\r\n        background: settings.background,\r\n        logo: settings.logo,\r\n      });\r\n\r\n      setNotification({\r\n        type: \"success\",\r\n        message: \"‚úÖ Thank you! Your photo strip has been sent for print.\"\r\n      });\r\n\r\n      setSteps(0);\r\n      setCapturedPhotos([]); // Clear captured photos\r\n      initializeCanvas(); // Clear and reinitialize with background\r\n    } catch (error) {\r\n      console.warn(\"Upload failed:\", error);\r\n      setNotification({\r\n        type: \"error\",\r\n        message: \"‚ùå Failed to upload. Please check your connection and try again.\"\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Auto-hide notification after 5 seconds\r\n  useEffect(() => {\r\n    if (notification) {\r\n      const timer = setTimeout(() => {\r\n        setNotification(null);\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [notification]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 relative overflow-hidden\">\r\n      {/* Animated Background Elements */}\r\n      <div className=\"absolute inset-0 overflow-hidden\">\r\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse\"></div>\r\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000\"></div>\r\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse delay-500\"></div>\r\n      </div>\r\n\r\n      {/* Notification */}\r\n      {notification && (\r\n        <div className={`fixed top-6 right-6 z-50 p-4 rounded-2xl shadow-2xl backdrop-blur-lg border ${\r\n          notification.type === 'success'\r\n            ? 'bg-green-500/90 border-green-400/50'\r\n            : 'bg-red-500/90 border-red-400/50'\r\n        } text-white font-medium animate-slide-in`}>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <span className=\"text-lg\">{notification.type === 'success' ? '‚úÖ' : '‚ùå'}</span>\r\n            <span>{notification.message}</span>\r\n            <button\r\n              onClick={() => setNotification(null)}\r\n              className=\"ml-2 text-white/80 hover:text-white transition-colors\"\r\n            >\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 md:py-12\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8 sm:mb-12 md:mb-16\">\r\n          <div className=\"inline-block p-6 bg-white/10 backdrop-blur-lg rounded-3xl border border-white/20 shadow-2xl mb-6\">\r\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-white mb-3 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent\">\r\n              üì∏ Strip Photobooth\r\n            </h1>\r\n            <div className=\"w-24 h-1 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mx-auto mb-4\"></div>\r\n            <p className=\"text-base sm:text-lg md:text-xl text-white/90 font-medium\">Create amazing photo strips instantly!</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Enhanced Camera Section */}\r\n        <div className=\"max-w-md sm:max-w-lg md:max-w-xl mx-auto px-4 sm:px-0\">\r\n          <div className=\"bg-white/5 backdrop-blur-xl rounded-3xl p-6 sm:p-8 border border-white/10 shadow-2xl relative overflow-hidden\">\r\n            {/* Decorative elements */}\r\n            <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400\"></div>\r\n\r\n            <div className=\"text-center mb-6\">\r\n              <div className=\"inline-flex items-center space-x-3 bg-white/10 backdrop-blur-lg rounded-2xl px-6 py-3 border border-white/20\">\r\n                <span className=\"text-2xl\">üìπ</span>\r\n                <h3 className=\"text-xl sm:text-2xl font-bold text-white\">Camera</h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"relative group\">\r\n              <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                playsInline\r\n                className=\"w-full aspect-video rounded-2xl shadow-2xl border-4 border-white/20 group-hover:border-white/30 transition-all duration-300\"\r\n                style={{ objectFit: 'cover' }}\r\n              />\r\n\r\n              {/* Overlay gradient */}\r\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent rounded-2xl pointer-events-none\"></div>\r\n\r\n              {countdown && (\r\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm rounded-2xl\">\r\n                  <div className=\"text-center\">\r\n                    <div className={`text-4xl sm:text-6xl md:text-7xl font-black text-white drop-shadow-2xl mb-2 ${\r\n                      countdown === \"üì∏\" ? \"animate-pulse text-6xl sm:text-8xl md:text-9xl\" : \"animate-bounce\"\r\n                    }`}>\r\n                      {countdown}\r\n                    </div>\r\n                    <div className=\"text-white/80 text-sm sm:text-base font-medium\">\r\n                      {countdown === \"üì∏\" ? \"Capturing...\" : countdown === 1 ? \"Say Cheese!\" : \"Get ready!\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Capture Instructions */}\r\n              <div className=\"absolute bottom-4 left-4 right-4 bg-black/60 backdrop-blur-sm rounded-xl p-3 text-center\">\r\n                <p className=\"text-white text-sm font-medium\">\r\n                  üë• <span className=\"text-green-300\">ALL people in frame will be captured!</span>\r\n                </p>\r\n                <p className=\"text-white/70 text-xs mt-1\">\r\n                  High-res 600√ó1800px (300 DPI) ‚Ä¢ Perfect for 2√ó6 inch printing\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Enhanced Progress indicator */}\r\n            <div className=\"mt-6 flex justify-center space-x-3\">\r\n                {[1, 2, 3].map((step) => (\r\n                  <div key={step} className=\"flex flex-col items-center space-y-2\">\r\n                    <div\r\n                      className={`w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 transition-all duration-500 ${\r\n                        steps >= step\r\n                          ? 'bg-gradient-to-r from-green-400 to-emerald-400 border-green-300 shadow-lg shadow-green-400/50'\r\n                          : 'bg-white/10 border-white/30'\r\n                      }`}\r\n                    />\r\n                    <span className={`text-xs font-medium transition-colors duration-300 ${\r\n                      steps >= step ? 'text-green-300' : 'text-white/50'\r\n                    }`}>\r\n                      {step}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Enhanced Capture Button */}\r\n            <div className=\"mt-8\">\r\n              <button\r\n                onClick={startCapture}\r\n                disabled={steps >= 3}\r\n                className={`w-full py-4 sm:py-5 px-6 rounded-2xl font-bold text-lg sm:text-xl transition-all duration-300 transform relative overflow-hidden ${\r\n                  steps >= 3\r\n                    ? 'bg-gradient-to-r from-gray-500 to-gray-600 cursor-not-allowed text-gray-200'\r\n                    : 'bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 hover:from-pink-600 hover:via-purple-600 hover:to-indigo-600 text-white shadow-2xl hover:shadow-pink-500/25 hover:scale-105 active:scale-95'\r\n                }`}\r\n              >\r\n                <div className=\"relative z-10 flex items-center justify-center space-x-3\">\r\n                  <span className=\"text-2xl\">{steps >= 3 ? '‚úÖ' : 'üì∏'}</span>\r\n                  <span>{steps >= 3 ? 'All Photos Captured!' : 'Capture Photo'}</span>\r\n                </div>\r\n                {steps < 3 && (\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000\"></div>\r\n                )}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Enhanced Submit Section */}\r\n            <div className=\"mt-8 pt-6 border-t border-gradient-to-r from-transparent via-white/20 to-transparent\">\r\n              <div className=\"text-center mb-6\">\r\n                <div className=\"inline-block bg-white/10 backdrop-blur-lg rounded-2xl px-6 py-3 border border-white/20\">\r\n                  <p className=\"text-white/90 text-sm sm:text-base font-medium\">\r\n                    {steps >= 3 ? 'üéâ Ready to create your strip!' : `üì∑ ${3 - steps} more photo${3 - steps > 1 ? 's' : ''} needed`}\r\n                  </p>\r\n                  {settings.eventName && (\r\n                    <p className=\"text-purple-300 text-xs sm:text-sm mt-2 font-medium\">üéä {settings.eventName}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Enhanced Submit Button */}\r\n              <button\r\n                onClick={submit}\r\n                disabled={steps < 3 || isSubmitting}\r\n                className={`w-full py-4 sm:py-5 px-6 rounded-2xl font-bold text-lg sm:text-xl transition-all duration-300 transform relative overflow-hidden ${\r\n                  steps >= 3 && !isSubmitting\r\n                    ? 'bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 hover:from-emerald-600 hover:via-green-600 hover:to-teal-600 text-white shadow-2xl hover:shadow-emerald-500/25 hover:scale-105 active:scale-95'\r\n                    : 'bg-gradient-to-r from-gray-600 to-gray-700 text-gray-400 cursor-not-allowed'\r\n                }`}\r\n              >\r\n                <div className=\"relative z-10 flex items-center justify-center space-x-3\">\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\r\n                      <span>Creating Strip...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <span className=\"text-2xl\">üöÄ</span>\r\n                      <span>Submit Strip</span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                {steps >= 3 && !isSubmitting && (\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000\"></div>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Preview Canvas (hidden) */}\r\n          <canvas\r\n            ref={canvasRef}\r\n            width=\"600\"\r\n            height=\"1800\"\r\n            className=\"hidden\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}